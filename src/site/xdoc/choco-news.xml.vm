<?xml version="1.0" encoding="utf-8"?>
<document>
    <properties>
        <title>News</title>
        <author>CHOCO Development Team</author>
    </properties>
    <body>

        <section name="News">
            <subsection name="CP-VIZ: An Open Source Visualization Platform for CP">
                <p>
                    Charles Prud'homme -- 12/13/2010
                </p>
                <p>
                    We currently have the pleasure to welcome Helmut Simonis. As a part of the collaboration,
                    the old OADymPAC module has been replaced by a bright new one: CPVisu tracer. It allows the
                    production of three data files: the tree search, the states of constraints and variables at
                    different points of computations,and the configuration. These files can be interpreted using
                    <a href="https://sourceforge.net/projects/cpviz/">cpviz</a>
                    java library.
                    <br/>
                    The tree search data file generation is complete and can already be used. The states of constraints
                    and variables one is still underdevelopment, only vector visualizer and alldifferent visualizer
                    can be used. Other visualizers will be implemented soon.
                    <br/>
                    The CPVisu tracer module uses AOP (Aspect-Oriented Programming), weaves the choco-solver class files
                    to produce a modified JAR for logging. Thus, you need to add the followin jars to your classpath:
                    <a href="http://www.aspectj.org/">AspectJ</a>
                    and <a href="http://logback.qos.ch/">Logback</a>.
                </p>

                <p>
                    SendMoreMoney problem with logging statements
                </p>
                <source>
Model model;
IntegerVariable S, E, N, D, M, O, R, Y;
IntegerVariable[] SEND, MORE, MONEY;

model = new CPModel();

S = makeIntVar("S", 0, 9);
E = makeIntVar("E", 0, 9);
N = makeIntVar("N", 0, 9);
D = makeIntVar("D", 0, 9);
M = makeIntVar("M", 0, 9);
O = makeIntVar("0", 0, 9);
R = makeIntVar("R", 0, 9);
Y = makeIntVar("Y", 0, 9);
SEND = new IntegerVariable[]{S, E, N, D};
MORE = new IntegerVariable[]{M, O, R, E};
MONEY = new IntegerVariable[]{M, O, N, E, Y};

model.addConstraints(neq(S, 0), neq(M, 0));
model.addConstraint(allDifferent(S, E, N, D, M, O, R, Y));
model.addConstraints(
    eq(plus(scalar(new int[]{1000, 100, 10, 1}, SEND),
    scalar(new int[]{1000, 100, 10, 1}, MORE)),
    scalar(new int[]{10000, 1000, 100, 10, 1}, MONEY))
);

Solver solver = new CPSolver();
solver.read(model);

String dir = System.getProperty("user.dir");
Visualization visu = new Visualization("SendMoreMoney", solver, dir + "/out");

visu.createTree();
visu.createViz();

Vector visualizer = new Vector(solver.getVar(S, E, N, D, M, O, R, Y), Display.preset(), 8, 10);
visualizer.setMinMax(0, 9);

visu.addVisualizer(visualizer);

solver.solve();

visu.close();
                </source>

            </subsection>
        </section>
    </body>
</document>

